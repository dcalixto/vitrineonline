!function(t){"use strict";function r(t,r){var e,p,a,c;"undefined"==typeof document&&"function"==typeof require?(e="file://"+(process.platform.match(/^win/i)?"/":"")+require("fs").realpathSync("."),r&&"/"!==r.charAt(0)&&!r.match(/^\w+:\/\//)&&(r=e+require("path").sep+r),p=require("url").parse(r||e)):(e=document.location.href,p=document.createElement("a"),p.href=r||e),c=(r||e).match(/\/\/(.*?)(?::(.*?))?@/)||[];for(a in s)t[a]=p[s[a]]||"";if(t.protocol=t.protocol.replace(/:$/,""),t.query=t.query.replace(/^\?/,""),t.hash=o(t.hash.replace(/^#/,"")),t.user=o(c[1]||""),t.pass=o(c[2]||""),t.port=h[t.protocol]==t.port||0==t.port?"":t.port,t.protocol||/^([a-z]+:)?\/\/\/?/.test(r))t.path=t.path.replace(/^\/?/,"/");else{var u=new n(e.match(/(.*\/)/)[0]),f=u.path.split("/"),l=t.path.split("/"),y=["protocol","user","pass","host","port"],d=y.length;for(f.pop(),a=0;d>a;a++)t[y[a]]=u[y[a]];for(;".."==l[0];)f.pop(),l.shift();t.path=("/"!=r.charAt(0)?f.join("/"):"")+"/"+l.join("/")}t.paths(("/"==t.path.charAt(0)?t.path.slice(1):t.path).split("/")),t.query=new i(t.query)}function e(t){return encodeURIComponent(t).replace(/'/g,"%27")}function o(t){return t=t.replace(/\+/g," "),t=t.replace(/%([ef][0-9a-f])%([89ab][0-9a-f])%([89ab][0-9a-f])/gi,function(t,r,e,o){var i=parseInt(r,16)-224,n=parseInt(e,16)-128;if(0===i&&32>n)return t;var s=parseInt(o,16)-128,h=(i<<12)+(n<<6)+s;return h>65535?t:String.fromCharCode(h)}),t=t.replace(/%([cd][0-9a-f])%([89ab][0-9a-f])/gi,function(t,r,e){var o=parseInt(r,16)-192;if(2>o)return t;var i=parseInt(e,16)-128;return String.fromCharCode((o<<6)+i)}),t.replace(/%([0-7][0-9a-f])/gi,function(t,r){return String.fromCharCode(parseInt(r,16))})}function i(t){for(var r,e=/([^=&]+)(=([^&]*))?/g;r=e.exec(t);){var i=decodeURIComponent(r[1].replace(/\+/g," ")),n=r[3]?o(r[3]):"";void 0!==this[i]&&null!==this[i]?(this[i]instanceof Array||(this[i]=[this[i]]),this[i].push(n)):this[i]=n}}function n(t){r(this,t)}var s={protocol:"protocol",host:"hostname",port:"port",path:"pathname",query:"search",hash:"hash"},h={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443};i.prototype.toString=function(){var t,r,o="",i=e;for(t in this)if(!(this[t]instanceof Function||null===this[t]))if(this[t]instanceof Array){var n=this[t].length;if(n)for(r=0;n>r;r++)o+=o?"&":"",o+=i(t)+"="+i(this[t][r]);else o+=(o?"&":"")+i(t)+"="}else o+=o?"&":"",o+=i(t)+"="+i(this[t]);return o},n.prototype.clearQuery=function(){for(var t in this.query)this.query[t]instanceof Function||delete this.query[t];return this},n.prototype.queryLength=function(){var t,r=0;for(t in this)this[t]instanceof Function||r++;return r},n.prototype.isEmptyQuery=function(){return 0===this.queryLength()},n.prototype.paths=function(t){var r,i="",n=0;if(t&&t.length&&t+""!==t){for(this.isAbsolute()&&(i="/"),r=t.length;r>n;n++)t[n]=!n&&t[n].match(/^\w:$/)?t[n]:e(t[n]);this.path=i+t.join("/")}for(t=("/"===this.path.charAt(0)?this.path.slice(1):this.path).split("/"),n=0,r=t.length;r>n;n++)t[n]=o(t[n]);return t},n.prototype.encode=e,n.prototype.decode=o,n.prototype.isAbsolute=function(){return this.protocol||"/"===this.path.charAt(0)},n.prototype.toString=function(){return(this.protocol&&this.protocol+"://")+(this.user&&e(this.user)+(this.pass&&":"+e(this.pass))+"@")+(this.host&&this.host)+(this.port&&":"+this.port)+(this.path&&this.path)+(this.query.toString()&&"?"+this.query)+(this.hash&&"#"+e(this.hash))},t[t.exports?"exports":"Url"]=n}("undefined"!=typeof module&&module.exports?module:window);